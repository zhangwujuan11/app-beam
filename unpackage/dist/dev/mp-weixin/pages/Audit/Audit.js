(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Audit/Audit"],{130:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var i=o(n(131));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},131:function(t,e,n){"use strict";n.r(e);var o=n(132),i=n(134);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n(136);var u,r=n(32),a=Object(r["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],u);a.options.__file="pages/Audit/Audit.vue",e["default"]=a.exports},132:function(t,e,n){"use strict";n.r(e);var o=n(133);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},133:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return u})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return o}));try{o={uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,253))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,260))},uButton:function(){return n.e("uni_modules/uview-ui/components/u-button/u-button").then(n.bind(null,267))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,207))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,["4","5","6"].includes(t.inspectionStatus));t.$mp.data=Object.assign({},{$root:{g0:n}})},s=!1,u=[];i._withStripped=!0},134:function(t,e,n){"use strict";n.r(e);var o=n(135),i=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},135:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(56)),s=o(n(58)),u=n(101),r=n(41),a=o(n(36)),c=a.default.baseUrl,d={name:"AuditTn",data:function(){return{inspectionStatus:"",processInspectionId:"",props_id:"",action:c+"/common/ossUpload",fileList:[],auditingform:{processInspectionId:0,taskId:0,content:"",attachUrl:"",state:0},Upheader:{Authorization:""}}},onLoad:function(t){console.log("options",t),this.props_id=t.id,this.inspectionStatus=t.inspectionStatus,this.processInspectionId=t.processInspectionId},methods:{auditingpass:function(){this.auditingform.state=1,this.Upheader.Authorization="Bearer "+(0,r.getToken)(),this.$refs.uUpload.upload(),0==this.fileList.length?this.Submitaudit():this.$refs.uUpload.upload(),console.log(this.auditingform)},auditingdispass:function(){if(console.log("22222"),this.auditingform.state=2,this.Upheader.Authorization="Bearer "+(0,r.getToken)(),""==this.auditingform.content)return console.log("4444"),void this.$refs.uToast.show({type:"error",title:"请输入意见",message:"请输入意见",duration:1e3,iconUrl:"https://cdn.uviewui.com/uview/demo/toast/success.png"});console.log("3333"),0==this.fileList.length?this.Submitaudit():this.$refs.uUpload.upload()},uploadSuccess:function(t){this.auditingform.attachUrl=t.data,this.Submitaudit()},Submitaudit:function(){var e=this;return(0,s.default)(i.default.mark((function n(){var o,s;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.auditingform.processInspectionId=e.processInspectionId,n.next=3,(0,u.inspectioninfo)(e.processInspectionId);case 3:o=n.sent,e.auditingform.taskId=o.data.taskId,console.log("inspectioninfo",o),console.log("this.auditingform",e.auditingform),s="",n.t0=e.inspectionStatus,n.next="4"===n.t0?11:"5"===n.t0?16:"6"===n.t0?20:24;break;case 11:return console.log("66666"),n.next=14,(0,u.selfInspection)(e.auditingform);case 14:return s=n.sent,n.abrupt("break",24);case 16:return n.next=18,(0,u.inspectionstest)(e.auditingform);case 18:return s=n.sent,n.abrupt("break",24);case 20:return n.next=22,(0,u.acceptance)(e.auditingform);case 22:return s=n.sent,n.abrupt("break",24);case 24:200==s.code?(e.$refs.uToast.show({type:"success",title:s.message,message:s.message,duration:1e3,iconUrl:"https://cdn.uviewui.com/uview/demo/toast/success.png",url:"/pages/inspection/inspection",complete:function(){t.navigateBack({delta:2})}}),console.log("成功")):e.$refs.uToast.show({type:"error",title:"失败",message:s.data,duration:1e3,iconUrl:"https://cdn.uviewui.com/uview/demo/toast/success.png",url:"/pages/inspection/inspection",complete:function(){t.navigateBack({delta:2})}}),console.log("inspectionRes",s),console.log("inspectionStatus",e.inspectionStatus);case 27:case"end":return n.stop()}}),n)})))()},onchange:function(t){console.log("change",t)},onComlete:function(t,e){this.fileList=t,console.log("选择文件完毕",t,this.fileList)}}};e.default=d}).call(this,n(2)["default"])},136:function(t,e,n){"use strict";n.r(e);var o=n(137),i=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},137:function(t,e,n){}},[[130,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/Audit/Audit.js.map