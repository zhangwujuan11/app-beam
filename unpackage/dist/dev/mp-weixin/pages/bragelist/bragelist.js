(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bragelist/bragelist"],{87:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var r=o(n(88));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},88:function(e,t,n){"use strict";n.r(t);var o=n(89),r=n(91);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n(93);var i,u=n(32),s=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);s.options.__file="pages/bragelist/bragelist.vue",t["default"]=s.exports},89:function(e,t,n){"use strict";n.r(t);var o=n(90);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},90:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return o}));try{o={uSearch:function(){return n.e("uni_modules/uview-ui/components/u-search/u-search").then(n.bind(null,186))},uTag:function(){return n.e("uni_modules/uview-ui/components/u-tag/u-tag").then(n.bind(null,193))},uIcon:function(){return n.e("uni_modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,200))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,207))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,{background:"#5FB760",color:"white",padding:"5px 0","border-radius":"4px"});e.$mp.data=Object.assign({},{$root:{a0:n}})},a=!1,i=[];r._withStripped=!0},91:function(e,t,n){"use strict";n.r(t);var o=n(92),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},92:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(18)),a=n(84),i=n(43),u=(o(n(38)),{data:function(){return{queryform:{pageNum:1,pageSize:10,keyFields:"",bridgeId:e.getStorageSync("brigeId")},tabledata:[],total:0}},onBackPress:function(t){return e.reLaunch({url:"/pages/index/index"}),!0},onLoad:function(t){var n=this;t.beamid?(0,a.bragelist)({beamId:t.beamid,bridgeId:e.getStorageSync("brigeId")}).then((function(e){n.tabledata=e.data.items,n.total=e.data.total,n.$refs.uToast.show({title:"工单未生成"})})):this.getlist()},methods:{getlist:function(){var e=this;(0,a.bragelist)(this.queryform).then((function(t){e.tabledata=t.data.items,e.total=t.data.total}))},addorderbtn:function(e){var t=this;(0,a.addorder)({beamId:e}).then((function(e){if(200==e.code){t.$refs.uToast.show({title:"工单已生成"}),t.queryform.pageSize=t.queryform.pageNum*t.queryform.pageSize;var n=t.queryform.pageNum;t.queryform.pageNum=1,t.getlist(),t.queryform.pageNum=n,t.queryform.pageSize=10}}))},goinfo:function(t){e.navigateTo({url:"/pages/brageinfo/brageinfo?id="+t})},golook:function(t,n,o){e.navigateTo({url:"/pages/brageDetails/brageDetails?showcheck=false&id="+t+"&planId="+n+"&isf="+o})},goadd:function(t){e.navigateTo({url:"/pages/brageadd/brageadd?id="+t})},bindqrcode:function(t){var n=this;e.scanCode({success:function(e){var o=JSON.stringify(e.result),r=o.lastIndexOf("="),i=o.substring(r+1,o.length-1);e.result.includes("qrId")?(0,a.binded)({qrCodeId:i,beamId:t}).then((function(e){n.$refs.uToast.show({title:"绑定成功"}),n.queryform.pageSize=n.queryform.pageNum*n.queryform.pageSize;var t=n.queryform.pageNum;n.queryform.pageNum=1,n.getlist(),n.queryform.pageNum=t,n.queryform.pageSize=10})).catch((function(e){console.log(e.data)})):n.$refs.uToast.show({title:"二维码信息错误"})},fail:function(e){n.$refs.uToast.show({title:"识别二维码失败"})},complete:function(){console.log("扫码结束")}})},jieabngqrcode:function(e,t,n){var o=this;t=t.replace("#","♯"),(0,i.showConfirm)("确认解绑梁板编号为"+t+"的二维码?").then((function(t){t.confirm&&(0,a.jibinded)({qrCodeId:n,beamId:e}).then((function(e){o.$refs.uToast.show({title:"解绑成功"}),o.queryform.pageSize=o.queryform.pageNum*o.queryform.pageSize;var t=o.queryform.pageNum;o.queryform.pageNum=1,o.getlist(),o.queryform.pageNum=t,o.queryform.pageSize=10}))}))}},onReachBottom:function(){var t=this;this.queryform.pageNum*this.queryform.pageSize>=this.total?(e.showToast({title:"没有更多数据了",icon:"none",duration:1e3}),setTimeout((function(){e.hideLoading()}),500)):(this.queryform.pageNum<=this.queryform.pageNum-1?setTimeout((function(){e.hideLoading()}),500):(e.showLoading({title:"加载中"}),this.queryform.pageNum++,(0,a.bragelist)(this.queryform).then((function(e){200==e.code&&(t.total=e.data.total,t.tabledata=[].concat((0,r.default)(t.tabledata),(0,r.default)(e.data.items)))}))),setTimeout((function(){e.hideLoading()}),500))}});t.default=u}).call(this,n(2)["default"])},93:function(e,t,n){"use strict";n.r(t);var o=n(94),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},94:function(e,t,n){}},[[87,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/bragelist/bragelist.js.map