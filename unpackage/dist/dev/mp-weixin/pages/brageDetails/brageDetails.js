(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/brageDetails/brageDetails"],{169:function(t,e,n){"use strict";(function(t,e){var s=n(4);n(26);s(n(25));var o=s(n(170));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},170:function(t,e,n){"use strict";n.r(e);var s=n(171),o=n(173);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n(175);var a,r=n(32),u=Object(r["default"])(o["default"],s["render"],s["staticRenderFns"],!1,null,"5de88ee6",null,!1,s["components"],a);u.options.__file="pages/brageDetails/brageDetails.vue",e["default"]=u.exports},171:function(t,e,n){"use strict";n.r(e);var s=n(172);n.d(e,"render",(function(){return s["render"]})),n.d(e,"staticRenderFns",(function(){return s["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return s["recyclableRender"]})),n.d(e,"components",(function(){return s["components"]}))},172:function(t,e,n){"use strict";var s;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return s}));try{s={uForm:function(){return n.e("uni_modules/uview-ui/components/u-form/u-form").then(n.bind(null,214))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,221))},uCollapse:function(){return n.e("uni_modules/uview-ui/components/u-collapse/u-collapse").then(n.bind(null,232))},uCollapseItem:function(){return n.e("uni_modules/uview-ui/components/u-collapse-item/u-collapse-item").then(n.bind(null,239))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,330))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,253))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,260))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,207))},uButton:function(){return n.e("uni_modules/uview-ui/components/u-button/u-button").then(n.bind(null,267))},uPopup:function(){return n.e("uni_modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,274))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var t=this,e=t.$createElement,n=(t._self._c,{color:"#181818","font-size":"16px",position:"relative","font-weight":"500","padding-left":"20px"}),s=t.flgs&&t.flgsss?4==t.addform.taskStatus&&t.checkPermi(["beam:inspection:selfInspection"]):null,o=t.flgs&&t.flgsss?5==t.addform.taskStatus&&t.checkPermi(["beam:inspection:test"]):null,i=t.flgs&&t.flgsss?6==t.addform.taskStatus&&t.checkPermi(["beam:inspection:acceptance"]):null,a=t.flgs&&t.flgsss?1==t.addform.taskStatus&&t.checkPermi(["beam:inspection:accept"]):null,r=t.flgs&&t.flgsss?2==t.addform.taskStatus&&t.checkPermi(["beam:inspection:inProgress"]):null,u=t.flgs&&t.flgsss?3==t.addform.taskStatus&&t.checkPermi(["beam:inspection:underRectification"]):null;t._isMounted||(t.e0=function(e){t.show=!0}),t.$mp.data=Object.assign({},{$root:{a0:n,m0:s,m1:o,m2:i,m3:a,m4:r,m5:u}})},i=!1,a=[];o._withStripped=!0},173:function(t,e,n){"use strict";n.r(e);var s=n(174),o=n.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},174:function(t,e,n){"use strict";(function(t){var s=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n(11)),i=n(84),a=n(41),r=n(101),u=s(n(36)),c=n(102);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f=u.default.baseUrl,m={name:"brageinfo",props:{props_id:{type:String}},data:function(){return{ConstructionTeams:[],ConstructionCrew:[],Upheader:{Authorization:"Bearer "+(0,a.getToken)()},action:f+"/common/ossUpload",form:{},id:"",show:!1,addform:{},freelist:[],banlist:[],alllist:[],mobanlist:[],yanstatus:[{text:"合格",value:1},{text:"不合格",value:2}],processList:[],haveprocessList:[],flgs:!0,flgsss:!0,showtime:!1,fileList:[],planId:"",isf:0}},onLoad:function(t){this.id=t.id,this.planId=t.planId,this.isf=t.isf,t.showcheck?this.flgsss=!1:this.flgsss=!0},onBackPress:function(e){return t.redirectTo({url:"/pages/bragelist/bragelist"}),!0},mounted:function(){var t=this;!this.id&&(this.id=this.props_id,this.flgsss=!1),this.getlist(),(0,i.banlisu)().then((function(e){t.ConstructionCrew=e.data})),(0,i.mulist)().then((function(e){e.data.items.map((function(e){t.mobanlist.push({text:e.templateNumber,value:e.templateId})}))}))},methods:{checkPermi:c.checkPermi,getlist:function(){var t=this;this.haveprocessList=[];(0,i.beamsinfo)(this.id).then((function(e){t.form=e.data,null!=e.data.methodSettingsId&&(0,i.listsettingss)(e.data.methodSettingsId).then((function(n){t.processList=n.data.processList,(0,i.settingoff)({taskNo:e.data.taskNo}).then((function(e){if(e.data){e.data.map((function(e){7==e.taskStatus&&t.haveprocessList.push(e)}));var n=JSON.stringify(e.data);t.addform=t.processList[e.data.length];var s=JSON.parse(n).pop();7==s.taskStatus&&t.haveprocessList.length!=t.processList.length?(t.addform.deptId="",t.addform.deptName="",t.addform.seatId="",t.addform.templateId="",t.addform.inspectStatus=""):t.addform=l(l({},t.addform),s);var o=!0;o=null!=t.haveprocessList&&t.haveprocessList.length!=t.processList.length||t.haveprocessList.length==t.processList.length&&7!=t.haveprocessList[t.processList.length-1].taskStatus,t.flgs=o}else t.haveprocessList=[],t.addform=t.processList[0],t.flgs=!0;t.$set(t.addform,"teamIds",t.addform.teamIds.split(",")),t.$set(t.addform,"teamIdsdep",[]);for(var i=0;i<t.ConstructionCrew.length;i++)for(var a=0;a<t.addform.teamIds.length;a++)t.addform.teamIds[a]==t.ConstructionCrew[i].deptId&&t.addform.teamIdsdep.push(t.ConstructionCrew[i]);t.addform.teamIdsdep.map((function(e){t.banlist.push({text:e.deptName,value:e.deptId})}))}))}))})),this.$delete(this.fileList,0)},goback:function(){t.reLaunch({url:"/pages/bragelist/bragelist"})},firstsend:function(){var e=this;this.addform.planId=this.form.planId,(0,i.firsttasks)(this.addform).then((function(n){200==n.code&&(t.showToast({title:"派发成功"}),e.getlist())}))},sencendbtn:function(){var e=this;this.addform.planId=this.form.planId,(0,i.sentedtasks)(this.addform).then((function(n){200==n.code&&(t.showToast({title:"成功"}),e.getlist())}))},auditingpass:function(e){var n=this;this.addform.state=1,this.$nextTick((function(){4==e?(0,r.selfInspection)(n.addform).then((function(e){200==e.code&&(t.showToast({title:e.message}),n.getlist())})):5==e?(0,r.inspectionstest)(n.addform).then((function(e){200==e.code&&(t.showToast({title:e.message}),n.getlist())})):6==e&&(0,r.acceptance)(n.addform).then((function(e){200==e.code&&(t.showToast({title:e.message}),n.getlist())}))}))},auditingdispass:function(e){var n=this;this.addform.state=2,this.$nextTick((function(){if(!n.addform.content)return t.showToast({icon:"error",title:"请输入审核意见"}),!1;4==e?(0,r.selfInspection)(n.addform).then((function(e){200==e.code&&200==e.code&&(t.showToast({title:e.message}),n.getlist())})):5==e?(0,r.inspectionstest)(n.addform).then((function(e){200==e.code&&(t.showToast({title:e.message}),n.getlist())})):6==e&&(0,r.acceptance)(n.addform).then((function(e){200==e.code&&(t.showToast({title:e.message}),n.getlist())}))}))},uploadSuccess:function(t){this.addform.attachUrl=t.data},onComlete:function(t,e){this.fileList=t,this.$refs.uUpload.upload()},depname:function(t){var e=this;this.banlist.map((function(n){n.value==t&&(e.addform.deptName=n.text)}))},betime:function(t){this.addform.beginTime=t.result}}};e.default=m}).call(this,n(2)["default"])},175:function(t,e,n){"use strict";n.r(e);var s=n(176),o=n.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=o.a},176:function(t,e,n){}},[[169,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/brageDetails/brageDetails.js.map